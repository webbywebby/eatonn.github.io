(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2850],{syeM:(e,t,r)=>{"use strict";r.d(t,{NT:()=>n,E9:()=>a,oP:()=>s,xB:()=>u,rI:()=>o});var n={SEARCH:"search",ORDERING:"ordering",ADD_ADDRESS:"add-address",CART:"cart",INIT:"init-flow",ERROR:"error-page"},a="Home page saga failed",s="/user/partnership-ordering",u="No location in local storage",o={VALIDATE_USER_FAILED:"validate_user_api_fail",LOGIN_V2_FAILED:"login_v2_fail",NO_LOGIN_AND_GUESTID:"no_allow_login_and_guest_id"}},Mb1N:(e,t,r)=>{"use strict";r.d(t,{L:()=>i,H:()=>c});var n=r("rePB"),a=r("VTBJ"),s=r("fujP"),u=r("zqKt"),o=r("iFif"),i={VALIDATE_USER_ALLOWED_Z_LOGIN:"validate_user_allowed_zomato_login",VALIDATE_USER_GUEST_LOGIN:"validate_user_guest_login",VALIDATE_USER_LOGGED_OUT_FLOW:"validate_user_logged_out",LOGIN_USER_RESPONSE:"login_user_success_response",LOGIN_PROMPT_IMPRESSION:"login_prompt_impression",LOGIN_PROMPT_BUTTON_CLICK:"login_prompt_button_click"},c=function(e){var t=e.ename,r=e.appType,c=e.validateUserRes,l=void 0===c?null:c,p=e.loginUserRes,f=void 0===p?null:p,_=u.Z.getInstance(),d=(0,a.Z)((0,a.Z)((0,a.Z)((0,n.Z)({},o.RL.ENAME,t),!(0,s.default)(l)&&(0,n.Z)({},o.RL.VAR4,JSON.stringify({validateUser:l}))),!(0,s.default)(f)&&(0,n.Z)({},o.RL.VAR5,JSON.stringify({loginUser:f}))),{},(0,n.Z)({},o.RL.VAR6,JSON.stringify({appType:r})));switch(t){case i.VALIDATE_USER_ALLOWED_Z_LOGIN:case i.VALIDATE_USER_GUEST_LOGIN:case i.VALIDATE_USER_LOGGED_OUT_FLOW:case i.LOGIN_USER_RESPONSE:case i.LOGIN_PROMPT_IMPRESSION:case i.LOGIN_PROMPT_BUTTON_CLICK:break;default:d=null}_.sendToJumbo(o.dZ.JEVENT,d)}},Ek7T:(e,t,r)=>{"use strict";r.d(t,{ip:()=>y,Gb:()=>F,P6:()=>K,WV:()=>J});var n=r("HaE+"),a=r("VTBJ"),s=r("o0o1"),u=r.n(s),o=r("IihT"),i=r("fujP"),c=r("7EGn"),l=r("yjvN"),p=r("A6yj"),f=r("KFCZ"),_=r("FS8r"),d=r("G2Un"),g=r("AdJq"),E=r("XFDC"),I=r("Ujvf"),T=r("T5pW"),O=r("zS5N"),m=r("nQUI"),x=r("X2+A"),v=r("VAjR"),A=r("HKiI"),L=r("syeM"),R=r("Mb1N"),S=r("BFm+"),w=u().mark(y),N=u().mark(Y),P=u().mark(M),b=u().mark(C),k=u().mark(V),h=u().mark(H),D=u().mark(z),U=u().mark(F),Z=u().mark(K),G=u().mark(W);function y(e){var t,r,n,a,s,i,c,p,f,_,d,g,E,I,T,O,x,v,A,N,P,b,k,h,D;return u().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.successCallback,r=e.errorCallback,n=e.flowType,a=e.skipPrompt,s=void 0!==a&&a,i=e.initPrompt,c=void 0!==i&&i,p=e.modalPrompt,f=void 0===p||p,_={},d=!1,u.next=5,(0,o.Ys)((function(e){return(0,S.Z)(e)}));case 5:return g=u.sent,u.prev=6,u.delegateYield(H(s,n),"t0",8);case 8:if(E=u.t0,T=(I=E||{}).allowLogin,O=void 0!==T&&T,x=I.guestUser,N=(A=(v=void 0===x?{}:x)||{}).thirdPartyUserId,P=A.guestId,E){u.next=13;break}throw Error(L.rI.VALIDATE_USER_FAILED);case 13:if(O||P){u.next=15;break}throw Error(L.rI.NO_LOGIN_AND_GUESTID);case 15:if(!N){u.next=23;break}return(0,R.H)({ename:R.L.VALIDATE_USER_GUEST_LOGIN,validateUserRes:E,appType:g}),u.next=19,(0,o.gz)((0,l.pY)(v));case 19:return u.next=21,te();case 21:u.next=40;break;case 23:if(!O){u.next=39;break}return(0,R.H)({ename:R.L.VALIDATE_USER_ALLOWED_Z_LOGIN,validateUserRes:E,appType:g}),u.delegateYield(V(s,n),"t1",26);case 26:if(_=u.t1,k=(b=_||null).zomatoUser,h=b.showPrompt,D=b.promptSnippet,_||k){u.next=30;break}throw Error(L.rI.LOGIN_V2_FAILED);case 30:return u.next=32,(0,o.gz)((0,m.lx)(k));case 32:return(0,R.H)({ename:R.L.LOGIN_USER_RESPONSE,loginUserRes:_,appType:g}),d=h&&f,u.delegateYield(Y({showLoginPrompt:d,promptSnippet:D,successCallback:t}),"t2",35);case 35:return u.next=37,te();case 37:u.next=40;break;case 39:P&&((0,R.H)({ename:R.L.VALIDATE_USER_LOGGED_OUT_FLOW,validateUserRes:E,appType:g}),ee(P));case 40:return u.delegateYield(M(!d&&t),"t3",41);case 41:return u.abrupt("return",!0);case 44:return u.prev=44,u.t4=u.catch(6),u.delegateYield(C(r,c,n,u.t4),"t5",47);case 47:return u.abrupt("return",!1);case 48:case"end":return u.stop()}}),w,null,[[6,44]])}function Y(e){var t,r,n,a;return u().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.showLoginPrompt,r=e.promptSnippet,n=e.successCallback,!t){s.next=7;break}return a={isVisible:!0,title:(0,c.default)(r,"title.text",""),subtitle:(0,c.default)(r,"subtitle.text",""),imageSrc:(0,c.default)(r,"image.url",""),onPrimaryClickHandler:n,primaryButtonLabel:(0,c.default)(r,"actionButtons[0].text",""),showPrimaryButton:!0},s.next=5,(0,o.gz)((0,x.C2)());case 5:return s.next=7,(0,o.gz)((0,T.jg)(a));case 7:case"end":return s.stop()}}),N)}function M(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.gz)((0,l.GB)());case 2:if("function"!=typeof e){t.next=5;break}return t.next=5,e();case 5:case"end":return t.stop()}}),P)}function C(e,t,r,n){var a;return u().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!t){s.next=3;break}return s.next=3,(0,o.gz)((0,A.D4)({page_info:{name:v.fP,isMobile:1}}));case 3:return s.next=5,(0,o.Ys)((function(e){return(0,c.default)(e,"pages.current.name","")}));case 5:return a=s.sent,s.next=8,(0,o.gz)((0,l.Ag)());case 8:if((0,O.j5)(O.yt.USER_PERMISSION_FAILURE,{message:n.message,pageName:a,flowType:r,appType:O.IF.GPAY}),"function"!=typeof e){s.next=12;break}return s.next=12,e();case 12:case"end":return s.stop()}}),b)}function V(e,t){var r,n,a,s,o;return u().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return r=null,u.delegateYield(z(e,t),"t0",2);case 2:if(n=u.t0,a=n.identityToken,s=n.phoneToken,e||a&&s){u.next=7;break}return u.abrupt("return",r);case 7:return u.prev=7,u.next=10,Q();case 10:return o=u.sent,u.next=13,o.json();case 13:r=u.sent,u.next=19;break;case 16:u.prev=16,u.t1=u.catch(7),r=null;case 19:return u.abrupt("return",r);case 20:case"end":return u.stop()}}),k,null,[[7,16]])}function H(e,t){var r,n,a,s,o,i;return u().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return r=null,u.delegateYield(z(e,t),"t0",2);case 2:if(n=u.t0,a=n.identityToken,s=n.phoneToken,e||a&&s){u.next=7;break}return u.abrupt("return",r);case 7:return u.prev=7,u.next=10,q(a,s);case 10:return o=u.sent,u.next=13,o.json();case 13:return r=u.sent,i=(0,c.default)(r,"guestUser.guestId",""),u.delegateYield(W(i,a,s),"t1",16);case 16:u.next=21;break;case 18:u.prev=18,u.t2=u.catch(7),r=null;case 21:return u.abrupt("return",r);case 22:case"end":return u.stop()}}),h,null,[[7,18]])}function z(e,t){var r,n,a,s,i,l,p;return u().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return r={},n={},u.next=4,(0,o.Ys)((function(e){return(0,c.default)(e,"pages.current.name","")}));case 4:return a=u.sent,u.prev=5,u.next=8,(0,o.RE)(B,e);case 8:r=u.sent,u.next=17;break;case 11:if(u.prev=11,u.t0=u.catch(5),e){u.next=16;break}return u.next=16,(0,o.gz)((0,I.u1)(u.t0.message));case 16:(0,O.j5)(O.yt.USER_IDENTITY_FAILURE,{message:u.t0.message,pageName:a,flowType:t,appType:O.IF.GPAY});case 17:return u.prev=17,u.next=20,(0,o.RE)(j,e);case 20:n=u.sent,u.next=29;break;case 23:if(u.prev=23,u.t1=u.catch(17),e){u.next=28;break}return u.next=28,(0,o.gz)((0,I.u1)(u.t1.message));case 28:(0,O.j5)(O.yt.USER_PERMISSION_FAILURE,{message:u.t1.message,pageName:a,flowType:t,appType:O.IF.GPAY});case 29:return s=r.grantToken,i=void 0===s?"":s,l=n.grantToken,p=void 0===l?"":l,u.abrupt("return",{identityToken:i,phoneToken:p});case 32:case"end":return u.stop()}}),D,null,[[5,11],[17,23]])}function F(){var e,t;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,_.K.getItem("guestId");case 2:if(e=r.sent){r.next=5;break}return r.abrupt("return");case 5:return r.next=7,(0,o.gz)((0,l.B8)());case 7:return t={guest_id:e},r.next=10,(0,o.gz)((0,l.pY)(t));case 10:case"end":return r.stop()}}),U)}function K(){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.RE)(X,{});case 2:if(!(e=t.sent)){t.next=8;break}return t.next=6,(0,o.gz)((0,p.s3)(e,void 0,1));case 6:t.next=10;break;case 8:return t.next=10,(0,o.gz)((0,l.O1)());case 10:case"end":return t.stop()}}),Z)}var B=function(e){var t=f.Z.getClient();if(t)return t.requestIdentity(e);throw Error("Oops! Something went wrong")},j=function(e){var t=f.Z.getClient();if(t)return t.requestUserDetails(e);throw Error("Oops! Something went wrong")},J=function(){return new Promise((function(e,t){f.Z.getClient().requestCurrentLocation().then((function(t){var r={coords:{latitude:t.latitude,longitude:t.longitude}};e(r)})).catch((function(e){t(e)}))}))};function W(e,t,r){var n,s;return u().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if({},n=(0,a.Z)((0,a.Z)((0,a.Z)({},e&&{"X-ACCESS-UUID":e}),t&&{"X-ZOMATO-THIRDPARTY-IDENTITY-TOKEN":t}),r&&{"X-ZOMATO-THIRDPARTY-PHONE-TOKEN":r}),(0,i.default)(n)){u.next=7;break}return s={headers:n},(0,d.Io)({config:s}),u.next=7,(0,o.gz)((0,E.G)(s));case 7:case"end":return u.stop()}}),G)}var X=function(){var e=(0,n.Z)(u().mark((function e(){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,$();case 4:return r=e.sent,e.next=7,r.json();case 7:t=e.sent,e.next=17;break;case 10:if(e.prev=10,e.t0=e.catch(1),!e.t0.response){e.next=17;break}return e.next=15,e.t0.response.json();case 15:e.sent;case 17:return e.abrupt("return",t.url);case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),q=function(e,t){var r={method:"POST",headers:(0,a.Z)((0,a.Z)({},e&&{"X-ZOMATO-THIRDPARTY-IDENTITY-TOKEN":e}),t&&{"X-ZOMATO-THIRDPARTY-PHONE-TOKEN":t})};return(0,d.ZP)(g.ny,r)},Q=function(e,t){var r={method:"POST",headers:(0,a.Z)((0,a.Z)({},e&&{"X-ZOMATO-THIRDPARTY-IDENTITY-TOKEN":e}),t&&{"X-ZOMATO-THIRDPARTY-PHONE-TOKEN":t})};return(0,d.ZP)(g.lW,r)},$=function(){return(0,d.ZP)(g.Eo,{method:"GET"})},ee=function(e){_.K.setItem("guestId",e)},te=function(){_.K.removeItem("guestId")}},"3bOz":(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r("1OyB"),a=r("rePB"),s=function e(){(0,n.Z)(this,e)};(0,a.Z)(s,"setItem",(function(e,t){return new Promise((function(r){window.localStorage?r(window.localStorage.setItem("@PartnershipMweb:"+e,JSON.stringify(t))):r(null)}))})),(0,a.Z)(s,"getItem",(function(e){return new Promise((function(t){window.localStorage?t(JSON.parse(window.localStorage.getItem("@PartnershipMweb:"+e))):t(null)}))})),(0,a.Z)(s,"removeItem",(function(e){return new Promise((function(t){window.localStorage?t(window.localStorage.removeItem("@PartnershipMweb:"+e)):t(null)}))}))},FS8r:(e,t,r)=>{"use strict";r.d(t,{K:()=>n.Z});var n=r("3bOz")}}]);